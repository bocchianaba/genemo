<app-banner [title]="'Tous les Modules'"></app-banner>
<section class="container">
  <div class="row d-flex justify-content-center align-items-center">
    <div class="col-sm-8 col-md-6 col-lg-4 col-xl-4 offset-sm-2 offset-md-2 offset-lg-4 offset-xl-4 px-4">
      <div class="input-group my-2 w-100">
        <input type="search" (keyup)="search_module()" [(ngModel)]="search_name" class="form-control" id="search_bar"
          placeholder="Rechercher par ici ...">
        <button class="btn btn-primary" type="button" id="button-addon2">
          <i class="fa fa-search" aria-hidden="true"></i>
        </button>
      </div>
    </div>
    <div class="col-sm-2 col-md-4 col-lg-4 col-xl-4 d-flex justify-content-center align-items-center">
      <button class="btn btn-primary mx-sm-1 mx-lg-1 mx-md-1 my-2 d-flex align-items-center" (click)="display='list'" placement="top"
        ngbTooltip="Afficher les modules en liste">
        <i class="fa fa-list mx-2"></i>
        <div class="d-none d-md-block">Liste</div>
      </button>
      <button class="btn btn-primary mx-sm-1 mx-lg-1 mx-md-1 my-2 d-flex align-items-center" placement="top" ngbTooltip="Afficher les modules en carte"
        (click)="display='card'">
        <i class="fa fa-th mx-2"></i>
        <div class="d-none d-md-block">Carte</div>
      </button>
      <button class="btn btn-primary mx-sm-1 mx-lg-1 mx-md-1 my-2 d-flex align-items-center" placement="top" ngbTooltip="Afficher les modules en tableau"
        (click)="display='table'">
        <svg-table class="mx-2"></svg-table>
        <div class="d-none d-md-block">Tableau</div>
      </button>
      <button class="btn btn-primary mx-sm-1 mx-lg-1 mx-md-1 my-2 d-flex align-items-center" placement="top" ngbTooltip="Plus d'options">
        <i class="fa fa-ellipsis-v mx-2"></i>
        <div class="d-none d-md-block">Plus</div>
      </button>
    </div>
  </div>
</section>
<ng-container *ngIf="modules$| async as module_list">
  <ng-container *ngIf="module_list.modules.length && !loading;else empty_module">
    <section class="container" *ngIf="display=='list'">
      <div class="row">
        <nav class="nav justify-content-center align-items-center  flex-column">
          <a *ngFor="let module of module_list.modules" class="nav-link active" [routerLink]="'/modules/'+module.id">{{module.stationName}}</a>
        </nav>
      </div>
      <ngb-pagination class="d-flex justify-content-center my-4" (pageChange)="page_change($event)"
        [(page)]="module_list.pagination.page" [pageSize]="module_list.pagination.limit"
        [collectionSize]="module_list.pagination.totalCount">
      </ngb-pagination>
    </section>
    <section class="container" *ngIf="display=='card'">
      <div class="row d-flex justify-content-center align-items-skretch">
        <div class="col-xs-10 col-sm-6 col-md-6 col-lg-4" *ngFor="let module of module_list.modules">
          <div class="card border-primary my-2">
            <!-- <img class="card-img-top" src="holder.js/100px180/" alt=""> -->
            <div class="card-body pb-0">
              <h4 class="card-title">
                <button class="btn btn-outline-danger float-start mx-2 bg-white" [ngbTooltip]="'Il y a défaut'" *ngIf="module?.status?.includes('FAULT')">
                  <i class="fa fa-exclamation-triangle mx-2 text-danger"></i>
                </button>
                <span>{{module.stationName| truncate}}</span>
                <button class="btn btn-outline-primary float-end" [ngbTooltip]="(module?.status?.includes('NOT_RUNNING'))?'Arrêt':'En cours'" *ngIf="!module?.status?.includes('STOPPED')"
                  [ngClass]="{'text-primary': !module?.status?.includes('NOT_RUNNING'), 'text-light': module?.status?.includes('NOT_RUNNING')}">
                  <!-- <i *ngIf="module?.status?.includes('NOT_RUNNING')" class="fa fa-power-off"></i> -->
                  <svg-sleep *ngIf="module?.status?.includes('NOT_RUNNING')"></svg-sleep>
                  <svg-running *ngIf="!module?.status?.includes('NOT_RUNNING')"></svg-running>
                  <!-- <i *ngIf="!module?.status?.includes('NOT_RUNNING')" class="fa fa-circle-o-notch fa-spin"></i> -->
                </button>
                <button class="btn btn-outline-danger float-start bg-white mx-2" [ngbTooltip]="'Interrompu'" *ngIf="module?.status?.includes('STOPPED')">
                  <i class="fa fa-arrow-down text-danger"></i>
                </button>
              </h4>
              <div class="row d-flex justify-content-between">
                <div class="col-sm-8 col-md-6 little_text">
                  <ng-template #svg_fuel>
                    <svg fill="#000000" width="24" height="24" viewBox="0 -29 122.88 122.88" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="enable-background:new 0 0 122.88 64.87" xml:space="preserve">
                      <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style>
                      <g>
                      <path class="st0" d="M6.48,10.34C4.99,10.62,3.2,6.72,4.61,6.08c22.22-12.79,24.46-2.2,46.46,2.86l0.28-0.79 c0.7-1.94,0.67-1.34,2.89-0.72l1.07,0.3c3.66,1.02,2.04,0.73,5-1.16C66.99,2.31,77.1,3.3,83.85,7.65c5.85,3.77,6.3,6.93,7.69,13.05 c1.28,5.61,19.56,22.09,31.34,33.11l-5.56,5.78l-7.73-8.05l-7.92,8.71c-2.14,2.35-3.54,4.85-7.06,4.6c-2.38-0.17-8.58-3.74-11-4.94 l-10.13-5.03c-1.82-1.73-2.68-3.98-2.5-6.81c-2.65,0.34-4.93-0.29-6.87-1.84c-6.98-5.57-3.33-9.32-4.3-15.42 c-0.07-0.42-0.15-0.85-0.26-1.27c-1.58-6.4-5.08-8.43-10.19-10.77c-1.62-0.74-1.45-0.35-0.83-2.03l0.25-0.68 C29.65,11.09,25.52,1.22,6.48,10.34L6.48,10.34z M4.04,10.16c1.01,4.47,4.04,6.7,4.04,8.93c0,2.23-1.01,4.47-4.04,4.47 C1.01,23.56,0,21.33,0,19.09C0,16.86,3.03,14.63,4.04,10.16L4.04,10.16z M77.87,41.66c0.36-1.19,0.21-2.54-0.9-3.61l4.29-3.59 c1.67-1.19,3.54-1.74,5.65-1.48c5.76,0.71,14.38,10.65,18.82,14.73l-8.59,9.72C92.13,50.22,86.47,40.79,77.87,41.66L77.87,41.66z M76.24,46.45c0.49-0.35,1.07-0.51,1.75-0.48l4.15,7.72C80.1,53.03,71.85,49.62,76.24,46.45L76.24,46.45z M81.53,45.17 c2.98,1.46,7.29,6.6,11.54,12.06c0.79,0.64-0.1,2.51-2.09,0.97l-2.61-1.39C83.54,54.08,82.99,51.5,81.53,45.17L81.53,45.17z"/>
                      </g>
                    </svg>
                  </ng-template>
                  <svg *ngIf="(module?.lastInfoTrame?.fuel??0)<10; else svg_fuel" height="24" width="24" fill="#de3545" viewBox="0 -29 122.88 122.88" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="enable-background:new 0 0 122.88 64.87" xml:space="preserve" stroke="#de3545"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style> <g> <path class="st0" d="M6.48,10.34C4.99,10.62,3.2,6.72,4.61,6.08c22.22-12.79,24.46-2.2,46.46,2.86l0.28-0.79 c0.7-1.94,0.67-1.34,2.89-0.72l1.07,0.3c3.66,1.02,2.04,0.73,5-1.16C66.99,2.31,77.1,3.3,83.85,7.65c5.85,3.77,6.3,6.93,7.69,13.05 c1.28,5.61,19.56,22.09,31.34,33.11l-5.56,5.78l-7.73-8.05l-7.92,8.71c-2.14,2.35-3.54,4.85-7.06,4.6c-2.38-0.17-8.58-3.74-11-4.94 l-10.13-5.03c-1.82-1.73-2.68-3.98-2.5-6.81c-2.65,0.34-4.93-0.29-6.87-1.84c-6.98-5.57-3.33-9.32-4.3-15.42 c-0.07-0.42-0.15-0.85-0.26-1.27c-1.58-6.4-5.08-8.43-10.19-10.77c-1.62-0.74-1.45-0.35-0.83-2.03l0.25-0.68 C29.65,11.09,25.52,1.22,6.48,10.34L6.48,10.34z M4.04,10.16c1.01,4.47,4.04,6.7,4.04,8.93c0,2.23-1.01,4.47-4.04,4.47 C1.01,23.56,0,21.33,0,19.09C0,16.86,3.03,14.63,4.04,10.16L4.04,10.16z M77.87,41.66c0.36-1.19,0.21-2.54-0.9-3.61l4.29-3.59 c1.67-1.19,3.54-1.74,5.65-1.48c5.76,0.71,14.38,10.65,18.82,14.73l-8.59,9.72C92.13,50.22,86.47,40.79,77.87,41.66L77.87,41.66z M76.24,46.45c0.49-0.35,1.07-0.51,1.75-0.48l4.15,7.72C80.1,53.03,71.85,49.62,76.24,46.45L76.24,46.45z M81.53,45.17 c2.98,1.46,7.29,6.6,11.54,12.06c0.79,0.64-0.1,2.51-2.09,0.97l-2.61-1.39C83.54,54.08,82.99,51.5,81.53,45.17L81.53,45.17z"></path> </g> </g></svg>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.fuel??0)<10}">{{module.lastInfoTrame.fuel}} %</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <ng-template #svg_bat>
                    <svg width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                      <path d="m 7 0 c -1 0 -1 1 -1 1 v 1 h -1 s -0.707031 -0.015625 -1.445312 0.355469 c -0.742188 0.371093 -1.554688 1.3125 -1.554688 2.644531 v 8 s -0.015625 0.707031 0.355469 1.449219 c 0.371093 0.738281 1.3125 1.550781 2.644531 1.550781 h 6 s 0.707031 0.015625 1.449219 -0.355469 c 0.738281 -0.371093 1.550781 -1.3125 1.550781 -2.644531 v -8 c 0 -1.332031 -0.8125 -2.273438 -1.550781 -2.644531 c -0.742188 -0.371094 -1.449219 -0.355469 -1.449219 -0.355469 h -1 v -1 c 0 -1 -1 -1 -1 -1 z m 1 4 h 3 c 0.554688 0 1 0.445312 1 1 v 8 c 0 0.554688 -0.445312 1 -1 1 h -6 c -0.554688 0 -1 -0.445312 -1 -1 v -8 c 0 -0.554688 0.445312 -1 1 -1 z m -3 3 v 6 h 6 v -6 z m 0 0" fill="#2e3434"/>
                    </svg>
                  </ng-template>
                  <svg width="24" height="24" *ngIf="(module?.lastInfoTrame?.bat??0)<10; else svg_bat" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path class="error" d="m 6 1 v 1 h -1 s -0.707031 -0.015625 -1.449219 0.355469 c -0.738281 0.371093 -1.550781 1.3125 -1.550781 2.644531 v 8 s -0.015625 0.707031 0.355469 1.449219 c 0.371093 0.738281 1.3125 1.550781 2.644531 1.550781 h 2 v -2 h -2 c -0.554688 0 -1 -0.445312 -1 -1 v -8 c 0 -0.554688 0.445312 -1 1 -1 h 6 c 0.554688 0 1 0.445312 1 1 v 2 h 2 v -2 c 0 -1.332031 -0.8125 -2.273438 -1.550781 -2.644531 c -0.742188 -0.371094 -1.449219 -0.355469 -1.449219 -0.355469 h -1 v -1 c 0 -1 -1 -1 -1 -1 h -2 s -1 0 -1 1 z m 3.5 7 c -0.832031 0 -1.5 0.667969 -1.5 1.5 v 5 c 0 0.832031 0.667969 1.5 1.5 1.5 h 5 c 0.832031 0 1.5 -0.667969 1.5 -1.5 v -5 c 0 -0.832031 -0.667969 -1.5 -1.5 -1.5 z m 1.5 1 h 2 v 2.5 s 0 0.5 -0.5 0.5 h -1 c -0.5 0 -0.5 -0.5 -0.5 -0.5 z m 0.5 4 h 1 c 0.277344 0 0.5 0.222656 0.5 0.5 v 1 c 0 0.277344 -0.222656 0.5 -0.5 0.5 h -1 c -0.277344 0 -0.5 -0.222656 -0.5 -0.5 v -1 c 0 -0.277344 0.222656 -0.5 0.5 -0.5 z m 0 0" fill="#de3545"></path> </g></svg>
                  <span [ngClass]="{'text-danger': (module?.lastInfoTrame?.bat??0)<10}">{{module?.lastInfoTrame?.bat??'0'}} VDC</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <svg width="24" *ngIf="(module.lastInfoTrame.temp??0)<=95; else svg_temp_red" height="24" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <title>thermometer</title>
                    <g id="Layer_2" data-name="Layer 2">
                      <g id="invisible_box" data-name="invisible box">
                        <rect width="24" height="24" fill="none"/>
                      </g>
                      <g id="Layer_6" data-name="Layer 6">
                        <g id="icons_Q2" data-name="icons Q2">
                          <g>
                            <path d="M29,10a8,8,0,0,0-16,0V27.5A10.5,10.5,0,0,0,10,35a11,11,0,0,0,22,0,10.5,10.5,0,0,0-3-7.5ZM21,42a7,7,0,0,1-7-7,6.8,6.8,0,0,1,3-5.7V10a4,4,0,0,1,8,0V29.3A6.8,6.8,0,0,1,28,35,7,7,0,0,1,21,42Z"/>
                            <path d="M23,30.4V17H19V30.4A5.1,5.1,0,0,0,16,35a5,5,0,0,0,10,0A5.1,5.1,0,0,0,23,30.4Z"/>
                            <path d="M40,23H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"/>
                            <path d="M40,17H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"/>
                            <path d="M40,11H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"/>
                            <path d="M34,9h6a2,2,0,0,0,0-4H34a2,2,0,0,0,0,4Z"/>
                          </g>
                        </g>
                      </g>
                    </g>
                  </svg>
                  <ng-template #svg_temp_red>
                    <svg viewBox="0 0 48 48" height="24" width="24" xmlns="http://www.w3.org/2000/svg" fill="#de3545" stroke="#de3545" stroke-width="0.00048000000000000007"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>thermometer</title> <g id="Layer_2" data-name="Layer 2"> <g id="invisible_box" data-name="invisible box"> <rect width="48" height="48" fill="none"></rect> </g> <g id="Layer_6" data-name="Layer 6"> <g id="icons_Q2" data-name="icons Q2"> <g> <path d="M29,10a8,8,0,0,0-16,0V27.5A10.5,10.5,0,0,0,10,35a11,11,0,0,0,22,0,10.5,10.5,0,0,0-3-7.5ZM21,42a7,7,0,0,1-7-7,6.8,6.8,0,0,1,3-5.7V10a4,4,0,0,1,8,0V29.3A6.8,6.8,0,0,1,28,35,7,7,0,0,1,21,42Z"></path> <path d="M23,30.4V17H19V30.4A5.1,5.1,0,0,0,16,35a5,5,0,0,0,10,0A5.1,5.1,0,0,0,23,30.4Z"></path> <path d="M40,23H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"></path> <path d="M40,17H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"></path> <path d="M40,11H34a2,2,0,0,0,0,4h6a2,2,0,0,0,0-4Z"></path> <path d="M34,9h6a2,2,0,0,0,0-4H34a2,2,0,0,0,0,4Z"></path> </g> </g> </g> </g> </g></svg>
                  </ng-template>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.temp??0)>95}">{{module.lastInfoTrame.temp}} °C</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <ng-template #svg_press>
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14,19V17.73a8,8,0,1,0-4,0V19H2v3H22V19ZM6.12,11.17A5.9,5.9,0,0,1,6.46,7.7a6,6,0,1,1,7.84,7.84,5.9,5.9,0,0,1-3.47.34,6,6,0,0,1-4.71-4.71ZM11,14.05A1.41,1.41,0,0,1,10.5,13c.17-1.9,1.5-7.5,1.5-7.5s1.33,5.6,1.5,7.5a1.39,1.39,0,0,1-.45,1.05h0l0,0A1.45,1.45,0,0,1,11,14.05ZM7,10H8v1H7Zm9,0h1v1H16Zm0-2H15V7h1ZM8,7H9V8H8Zm3-1H10V5h1Zm3,0H13V5h1Z"/><rect width="24" height="24" fill="none"/></svg>
                  </ng-template>
                  <svg  *ngIf="(module.lastInfoTrame.oilPress??0)<10; else svg_press" height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#de3545" stroke="#de3545" stroke-width="0.00024000000000000003"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M14,19V17.73a8,8,0,1,0-4,0V19H2v3H22V19ZM6.12,11.17A5.9,5.9,0,0,1,6.46,7.7a6,6,0,1,1,7.84,7.84,5.9,5.9,0,0,1-3.47.34,6,6,0,0,1-4.71-4.71ZM11,14.05A1.41,1.41,0,0,1,10.5,13c.17-1.9,1.5-7.5,1.5-7.5s1.33,5.6,1.5,7.5a1.39,1.39,0,0,1-.45,1.05h0l0,0A1.45,1.45,0,0,1,11,14.05ZM7,10H8v1H7Zm9,0h1v1H16Zm0-2H15V7h1ZM8,7H9V8H8Zm3-1H10V5h1Zm3,0H13V5h1Z"></path><rect width="24" height="24" fill="none"></rect></g></svg>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.oilPress??0)<10}">{{module.lastInfoTrame.oilPress||0}} Bar</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <svg *ngIf="(module?.lastInfoTrame?.freq??0)>=45 && (module?.lastInfoTrame?.freq??0)<=55; else svg_red_freq"  width="24" height="24" viewBox="0 0 24 24" data-name="Flat Line" xmlns="http://www.w3.org/2000/svg" class="icon flat-line"><polyline id="primary" points="21 12 17 12 15 16 11 8 8 15 6 12 3 12" style="fill: none; stroke: #000000; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline></svg>
                  <ng-template #svg_red_freq><svg viewBox="0 0 24 24" height="24" width="24" id="frequency-2" data-name="Flat Line" xmlns="http://www.w3.org/2000/svg" class="icon flat-line" fill="#ff0000" stroke="#ff0000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><polyline id="primary" points="21 12 17 12 15 16 11 8 8 15 6 12 3 12" style="fill: none; stroke: #de3545; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline></g></svg></ng-template>
                  <span [ngClass]="{'text-danger': (module?.lastInfoTrame?.freq??0)<45 || (module?.lastInfoTrame?.freq??0)>55}">{{module.lastInfoTrame.freq||0}} Hz</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph1??0)<180 || (module.lastInfoTrame.ph1??0)>240}" class="fw-bold">PH1: </span>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph1??0)<180 || (module.lastInfoTrame.ph1??0)>240}">{{module.lastInfoTrame.ph1||0}} V</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph2??0)<180 || (module.lastInfoTrame.ph2??0)>240}" class="fw-bold">PH2: </span>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph2??0)<180 || (module.lastInfoTrame.ph2??0)>240}">{{module.lastInfoTrame.ph2||0}} V</span>
                </div>
                <div class="col-sm-8 col-md-6 little_text">
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph3??0)<180 || (module.lastInfoTrame.ph3??0)>240}" class="fw-bold">PH3: </span>
                  <span [ngClass]="{'text-danger': (module.lastInfoTrame.ph3??0)<180 || (module.lastInfoTrame.ph3??0)>240}">{{module.lastInfoTrame.ph3||0}} V</span>
                </div>
              </div>
              <div class="text-center">
                <button class="btn btn-primary" [routerLink]="'/modules/'+module.id">
                  <i class="fa fa-plus mx-2"></i>
                  Voir plus
                </button>
              </div>
              <div class="text-center mb-0">
                <small style="font-size: x-small;"
                  *ngIf="(module.elapse_total.years||module.elapse_total.months||module.elapse_total.days||module.elapse_total.hours||module.elapse_total.minutes||module.elapse_total.seconds);else no_function">
                  fonctionne depuis
                  <strong>
                    <ng-container *ngIf="module.elapse_total.years">
                      {{module.elapse_total.years}} an(s)
                    </ng-container>
                    <ng-container *ngIf="module.elapse_total.months">
                      {{module.elapse_total.months}} mois
                    </ng-container>
                    <ng-container *ngIf="module.elapse_total.days">
                      {{module.elapse_total.days}} jour(s)
                    </ng-container>
                    <ng-container *ngIf="module.elapse_total.hours">
                      {{module.elapse_total.hours}} heure(s)
                    </ng-container>
                    <ng-container *ngIf="module.elapse_total.minutes">
                      {{module.elapse_total.minutes}} minute(s)
                    </ng-container>
                    <ng-container *ngIf="module.elapse_total.seconds">
                      {{module.elapse_total.seconds}} seconde(s)
                    </ng-container>
                  </strong>
                </small>
                <ng-template #no_function>
                  <small style="font-size: x-small">
                    <strong>
                      N'a jamais été mis en fonction
                    </strong>
                  </small>
                </ng-template>
              </div>
              <div class="text-center my-2 alert alert-info d-flex justify-content-center align-items-center">
                <div class="col-1">
                  <i class="fa fa-calendar"></i>
                </div>
                <small class="col-11" style="text-align: justify;">
                  dernière trame reçu le <strong>{{module.lastInfoTrame.date | camerounDate:"dd MMMM yyyy à HH:mm"}}</strong>
                </small>
              </div>
            </div>
          </div>
        </div>
        <ngb-pagination class="d-flex justify-content-center my-4" (pageChange)="page_change($event)"
          [(page)]="module_list.pagination.page" [pageSize]="module_list.pagination.limit"
          [collectionSize]="module_list.pagination.totalCount">
        </ngb-pagination>
      </div>
    </section>
    <section class="container" *ngIf="display=='table'">
      <div class="row d-flex justify-content-center align-items-center text-center">
        <div class="col-12 overflow-auto">
          <table class="table table-hover table-bordered table-responsive">
            <thead class="thead-default table-dark">
              <tr class=" align-middle">
                <th>Nom</th>
                <th>Etat</th>
                <th>Temperature</th>
                <th>Fuel</th>
                <th>frequence</th>
                <th>Pression d'huile</th>
                <th>Durée de fonctionnement</th>
                <th>Phase 1</th>
                <th>Phase 2</th>
                <th>Phase 3</th>
                <th>Trame Récente</th>
                <th>vidange Récente</th>
                <th>Remarque</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr [routerLink]="'/modules/'+module.id" style="cursor: pointer" *ngFor="let module of module_list.modules" class="align-middle" [ngClass]="{'alert alert-danger':module?.status?.includes('FAULT')}">
                <td scope="row">{{module.stationName}}</td>
                <td>
                  <span placement="left" [ngbTooltip]="module.status.includes('FAULT')?'En défaut':'Sans défaut'" *ngIf="module?.status=='NOT_RUNNING/FAULT' ||module?.status=='NOT_RUNNING'" class="text-danger">
                    <i class="fa fa-power-off mx-2"></i> En Arrêt
                  </span>
                  <span placement="left" [ngbTooltip]="module.status.includes('FAULT')?'En défaut':'Sans défaut'" *ngIf="module?.status=='RUNNING/FAULT' || module?.status=='RUNNING'" class="text-success">
                    <i class="fa fa-circle-o-notch fa-spin "></i> En fonction
                  </span>
                </td>
                <td [ngClass]="{'fw-bold': (module.lastInfoTrame.temp??0)>95}">{{module.lastInfoTrame.temp}} °C</td>
                <td [ngClass]="{'fw-bold': (module.lastInfoTrame.fuel??0)<10}">{{module.lastInfoTrame.fuel}} %</td>
                <td [ngClass]="{'fw-bold': (module?.lastInfoTrame?.freq??0)<45 || (module?.lastInfoTrame?.freq??0)>55 }">{{module?.lastInfoTrame?.freq??0}} Hz</td>
                <td [ngClass]="{'fw-bold': (module.lastInfoTrame.oilPress??0)<10}">{{module.lastInfoTrame.oilPress}} Bar</td>
                <td>
                  <ng-container *ngIf="module.elapse_total.years">
                    {{module.elapse_total.years}} an(s)
                  </ng-container>
                  <ng-container *ngIf="module.elapse_total.months">
                    {{module.elapse_total.months}} mois
                  </ng-container>
                  <ng-container *ngIf="module.elapse_total.days">
                    {{module.elapse_total.days}} jour(s)
                  </ng-container>
                  <ng-container *ngIf="module.elapse_total.hours">
                    {{module.elapse_total.hours}} heure(s)
                  </ng-container>
                  <ng-container *ngIf="module.elapse_total.minutes">
                    {{module.elapse_total.minutes}} minute(s)
                  </ng-container>
                  <ng-container *ngIf="module.elapse_total.seconds">
                    {{module.elapse_total.seconds}} seconde(s)
                  </ng-container>
                  <strong
                    *ngIf="!(module.elapse_total.years||module.elapse_total.months||module.elapse_total.days||module.elapse_total.hours||module.elapse_total.minutes||module.elapse_total.seconds)">
                    N'a jamais été mis en fonction
                  </strong>

                </td>
                <td [ngClass]="{'fw-bold': (module?.lastInfoTrame?.ph1??0)<180 || (module?.lastInfoTrame?.ph1??0)>240 }">{{module.lastInfoTrame.ph1||0}} V</td>
                <td [ngClass]="{'fw-bold': (module?.lastInfoTrame?.ph2??0)<180 || (module?.lastInfoTrame?.ph2??0)>240 }">{{module.lastInfoTrame.ph2||0}} V</td>
                <td [ngClass]="{'fw-bold': (module?.lastInfoTrame?.ph3??0)<180 || (module?.lastInfoTrame?.ph3??0)>240 }">{{module.lastInfoTrame.ph3||0}} V</td>
                <td>{{module.lastInfoTrame.date | camerounDate: 'dd MMMM yyyy à hh:MM'}}</td>
                <td>{{module.infoVidange?.date | camerounDate:'dd MMMM yyyy à hh:MM'}}</td>
                <td>{{module.infoVidange?.remarque}}</td>
                <td>
                  <button class="btn btn-primary" [routerLink]="'/modules/'+module.id">
                    <i class="fa fa-plus mx-2" aria-hidden="true"></i> voir plus
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <ngb-pagination class="d-flex justify-content-center my-4" (pageChange)="page_change($event)"
          [(page)]="module_list.pagination.page" [pageSize]="module_list.pagination.limit"
          [collectionSize]="module_list.pagination.totalCount">
        </ngb-pagination>
      </div>
    </section>
  </ng-container>
  <ng-template #empty_module>
    <section class="container">
      <div class="row justify-content-center align-items-center">
        <div class="col-sm-10 col-md-6 col-lg-4">
          <div class="row justify-content-center">
            <img src="assets/humaans.png" alt="empty_img">
          </div>
        </div>
        <h1 class="text-center mt-4 pt-4 text-danger">
          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
          Aucun module trouvé
        </h1>
        <p class="text-center">Vérifier que tous vos modules sont bien configurés.</p>
      </div>
    </section>
  </ng-template>
</ng-container>
